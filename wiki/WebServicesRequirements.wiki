#summary Project vision and requirements
#labels Phase-Requirements,Featured

= Web Services Vision =
A georeferencing web service that accepts a DwC record and returns georeferences for that record generated by the BioGeomancer Core API. 

= Single Georeference Requirements =

== Web Service Interface ==
The web service interface accepts HTTP GET requests using the following case insensitive URL parameters:
|| *Parameter* || *Description* || *Required* ||
|| locality || The Locality DwC concept || √ ||
|| interpreter || The BioGeomancer locality interpreter || √ ||
|| highergeography || The HigherGeography DwC concept || ||
|| country || The Country DwC concept || ||
|| verbatimlatitude || The VerbatimLatitude DwC concept || ||
|| verbatimlongitude || The VerbatimLongitude DwC concept || ||
|| island || The Island DwC concept  || ||
|| islandgroup || The IslandGroup DwC concept|||| 
|| waterbody || The WaterBody DwC concept  || ||
|| continent || The Continent DwC concept  || ||


Example:
`http://bg.berkeley.edu/georeference?locality=Stuttgart&country=Germany&interpreter=Yale`

== Web Service Output ==
The web service output format will be XML (UTF-8) with a `dwc` namespace for DwC elements. All URL request parameters will appear in the output. For example:

{{{  
<?xml version="1.0" encoding="utf-8"?>
<biogeomancer xmlns:dwc="http://rs.tdwg.org/tapir/1.0">
  <interpreter>Yale</interpreter>
  <dwc:Locality>Stuttgart</dwc:Locality>
  <dwc:HigherGeography>Germany</dwc:HigherGeography>
  <georeference>
    <dwc:DecimalLatitude>37.8715897</dwc:DecimalLatitude>
    <dwc:DecimalLongitude>-122.272747</dwc:DecimalLongitude>
    <dwc:CoordinateUncertaintyInMeters>5062.0</dwc:CoordinateUncertaintyInMeters>
  </georeference>
</biogeomancer>
}}}  


= Batch Georeference Requirements =
== Interface ==
Batch georeferencing will be supported by POSTing an XML batch request with a 5000 record limit:

{{{
<?xml version="1.0" encoding="utf-8"?>
<biogeomancer xmlns:dwc="http://rs.tdwg.org/tapir/1.0">
  <request type="batch" interpreter="Yale">
    <record>
      <dwc:Locality>Berkeley</dwc:Locality>
      <dwc:HigherGeography>California</dwc:HigherGeography>
    </record>
    <record>
      <dwc:Locality>Stuttgart</dwc:Locality>
      <dwc:HigherGeography>Germany</dwc:HigherGeography>
    </record>
    <record>
      <dwc:Locality>St. Petersburg</dwc:Locality>
      <dwc:HigherGeography>Russia</dwc:HigherGeography>
    </record>
  </request>
</biogeomancer>              
}}}

== Georeferencing ==
The batch georeferencing web service will use the latest BioGeomancer Core API for generating georeferences.

== Output ==
Batch georeferencing output will be XML (UTF-8) with a dwc namespace using the DarwinCore schema:

{{{
<?xml version="1.0" encoding="utf-8"?>
<biogeomancer xmlns:dwc="http://rs.tdwg.org/tapir/1.0">
<records interpreter="yale">
<record>
  <dwc:Locality>Berkeley</dwc:Locality>
  <dwc:HigherGeography>California</dwc:HigherGeography>
  <georeference>
    <dwc:DecimalLatitude>39.4650896</dwc:DecimalLatitude>
    <dwc:DecimalLongitude>-78.0275126</dwc:DecimalLongitude>
    <dwc:CoordinateUncertaintyInMeters>22675.0</dwc:CoordinateUncertaintyInMeters>
  </georeference>
  <georeference>
    <dwc:DecimalLatitude>33.1993704</dwc:DecimalLatitude>
    <dwc:DecimalLongitude>-79.9517488</dwc:DecimalLongitude>
    <dwc:CoordinateUncertaintyInMeters>47092.0</dwc:CoordinateUncertaintyInMeters>
  </georeference>
  <georeference>
    <dwc:DecimalLatitude>38.7544956</dwc:DecimalLatitude>
    <dwc:DecimalLongitude>-90.3312263</dwc:DecimalLongitude>
    <dwc:CoordinateUncertaintyInMeters>5038.0</dwc:CoordinateUncertaintyInMeters>
  </georeference>
</record>
<record>
  <dwc:Locality>Stuttgart</dwc:Locality>
  <dwc:HigherGeography>Germany</dwc:HigherGeography>
</record>
<record>
  <dwc:Locality>St. Petersburg</dwc:Locality>
  <dwc:HigherGeography>Russia</dwc:HigherGeography>
</record>
</records>
</biogeomancer>              
}}}




















