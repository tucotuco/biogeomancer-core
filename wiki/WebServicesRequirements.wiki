#summary Project vision and requirements
#labels Phase-Requirements

= Web Services Vision =
A georeferencing web service that accepts a DwC record and returns that record along with all georeferences for it generated by the BioGeomancer Core API. 

= Single Georeference Requirements =

== Web Service Interface ==
The web service interface accepts HTTP GET requests using the following case insensitive URL parameters:

|| *Parameter*  || *Description* ||
|| highergeography, hg || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/HigherGeography HigherGeography] concept ||
|| continent, cont || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/Continent Continent] concept  ||
|| waterbody, wb, w || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/WaterBody WaterBody] concept  ||
|| islandgroup, ig || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/IslandGroup IslandGroup] concept||
|| island, is || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/Island Island] concept  ||
|| country, cy, gadm0  || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/Country Country] concept ||
|| stateprovince, sp, s, gadm1 || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/StateProvince StateProvince] concept ||
|| county, co, gadm2 || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/County County] concept ||
|| locality, loc, l || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/Locality Locality] concept ||
|| verbatimlatitude, latitude, vlat, lat || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/GeospatialExtension Geospatial Extension] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/VerbatimLatitude VerbatimLatitude] concept ||
|| verbatimlongitude, longitude, vlong, vlng, long, lng || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/GeospatialExtension Geospatial Extension] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/VerbatimLongitude VerbatimLongitude] concept ||
|| interpreter, int, i || BioGeomancer locality interpreter ('yale', 'uiuc', 'tulane'; default is 'yale')||
|| header || BioGeomancer flag to show locality input in output header ('true', 'false'; default is 'false')||


Example:
`http://bg.berkeley.edu/ws/single?locality=Stuttgart&country=Germany&interpreter=yale&header=true`

== Web Service Output ==
The web service output format will be XML (UTF-8) with `dwcore` as the namespace for Darwin Core elementsand "dwgeo" as the namespace for Geospatial Extension elements. All URL request parameters will appear in the output if the header parameter is set to 'true'. For example:

{{{  
<?xml version="1.0" encoding="utf-8"?>
<biogeomancer xmlns:dwcore="http://rs.tdwg.org/dwc/dwcore/ xmlns:dwgeo="http://rs.tdwg.org/dwc/geospatial/">
  <interpreter>yale</interpreter>
  <dwcore:Country>Germany</dwcore:Country>
  <dwcore:Locality>Stuttgart</dwcore:Locality>
  <georeference>
    <interpretedLocality>Germany (gadm2:58:countries); Stuttgart (GADM:16422:countries, 2nd order divisions)</interpretedLocality>
    <dwgeo:DecimalLatitude>49.1430493</dwgeo:DecimalLatitude>
    <dwgeo:DecimalLongitude>9.6254345</dwgeo:DecimalLongitude>
    <dwgeo:GeodeticDatum>WGS84</dwgeo:GeodeticDatum>
    <dwgeo:CoordinateUncertaintyInMeters>93264.0</dwgeo:CoordinateUncertaintyInMeters>
  </georeference>
</biogeomancer>
}}}  


= Batch Georeference Requirements =
== Web Service Interface ==
Batch georeferencing will be supported by HTTP POST of an XML batch request with a 5000 record limit. The following DwC elements are accepted:

|| *Element*  || *Description* ||
|| HigherGeography || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/HigherGeography HigherGeography] concept ||
|| Continent || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/Continent Continent] concept  ||
|| WaterBody || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/WaterBody WaterBody] concept  ||
|| IslandGroup || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/IslandGroup IslandGroup] concept||
|| Island || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/Island Island] concept  ||
|| Country  || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/Country Country] concept ||
|| StateProvince || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/StateProvince StateProvince] concept ||
|| County || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/County County] concept ||
|| Locality || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/DarwinCoreDraftStandard Darwin Core] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/Locality Locality] concept ||
|| VerbatimLatitude || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/GeospatialExtension Geospatial Extension] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/VerbatimLatitude VerbatimLatitude] concept ||
|| VerbatimLongitude || [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/GeospatialExtension Geospatial Extension] [http://wiki.tdwg.org/twiki/bin/view/DarwinCore/VerbatimLongitude VerbatimLongitude] concept ||
|| interpreter || BioGeomancer locality interpreter ('yale', 'uiuc', 'tulane'; default is 'yale')||
|| header || BioGeomancer flag to show locality input in output header ('true', 'false'; default is 'false')||

Example batch request XML:

{{{
<?xml version="1.0" encoding="utf-8"?>
<biogeomancer xmlns:dwcore="http://rs.tdwg.org/dwc/dwcore/" xmlns:dwgeo="http://rs.tdwg.org/dwc/geospatial/">
  <request type="batch" interpreter="yale" header="true">
    <record>
      <dwcore:Locality>Berkeley</dwcore:Locality>
      <dwcore:StateProvince>California</dwcore:StateProvince>
    </record>
    <record>
      <dwcore:Locality>Stuttgart</dwcore:Locality>
      <dwcore:Country>Germany</dwcore:Country>
    </record>
    <record>
      <dwcore:Locality>St. Petersburg</dwcore:Locality>
      <dwcore:HigherGeography>Russia</dwcore:HigherGeography>
    </record>
  </request>
</biogeomancer>              
}}}

== Web Service Output ==
Batch georeferencing output will be XML (UTF-8) with a dwcore and dwgeo namespaces reflecting concepts in the Darwin Core and Geospatial Extension schemas:

{{{
<?xml version="1.0" encoding="utf-8"?>
<biogeomancer xmlns:dwcore="http://rs.tdwg.org/dwc/dwcore" xmlns:dwgeo="http://rs.tdwg.org/dwc/geospatial/">
<records interpreter="yale">
<record>
  <dwcore:Locality>Berkeley</dwcore:Locality>
  <dwcore:StateProvince>California</dwcore:StateProvince>
  <georeference>
    <dwgeo:DecimalLatitude>39.4650896</dwgeo:DecimalLatitude>
    <dwgeo:DecimalLongitude>-78.0275126</dwgeo:DecimalLongitude>
    <dwgeo:GeodeticDatum>WGS84</dwgeo:GeodeticDatum>
    <dwgeo:CoordinateUncertaintyInMeters>22675.0</dwgeo:CoordinateUncertaintyInMeters>
  </georeference>
  <georeference>
    <dwgeo:DecimalLatitude>33.1993704</dwgeo:DecimalLatitude>
    <dwgeo:DecimalLongitude>-79.9517488</dwgeo:DecimalLongitude>
    <dwgeo:GeodeticDatum>WGS84</dwgeo:GeodeticDatum>
    <dwgeo:CoordinateUncertaintyInMeters>47092.0</dwgeo:CoordinateUncertaintyInMeters>
  </georeference>
  <georeference>
    <dwgeo:DecimalLatitude>38.7544956</dwgeo:DecimalLatitude>
    <dwgeo:DecimalLongitude>-90.3312263</dwgeo:DecimalLongitude>
    <dwgeo:GeodeticDatum>WGS84</dwgeo:GeodeticDatum>
    <dwc:CoordinateUncertaintyInMeters>5038.0</dwgeo:CoordinateUncertaintyInMeters>
  </georeference>
</record>
<record>
  <dwcore:Locality>Stuttgart</dwcore:Locality>
  <dwcore:Country>Germany</dwcore:Country>
</record>
<record>
  <dwcore:Locality>St. Petersburg</dwcore:Locality>
  <dwcore:HigherGeography>Russia</dwcore:HigherGeography>
</record>
</records>
</biogeomancer>              
}}}